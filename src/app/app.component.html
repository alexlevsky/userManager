<button type="button" (click)="createUser()" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
    CREATE USER
  </button>
<table class="table table-dark">
  <thead>
    <tr>
      <th scope="col">Name</th>
      <th scope="col">Email</th>
      <th scope="col">City</th>
      <th scope="col"></th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let user of users">
      <th scope="row">{{ user.name }}</th>
      <td>{{ user.email }}</td>
      <td>{{user.address.city }}</td>
      <td><button type="button" (click)="editUser(user)" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">EDIT</button></td>
    </tr>
  </tbody>
</table>


<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">New user</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
          <form (submit)="submitUser(name, email, city)" #form="ngForm"  novalidate>
              <div class="form-group">
                <label for="name">User Name</label>
                <input type="text" required [ngModel]="modUser.name" (ngModelChange)="checkName($event, name)"  #name="ngModel" [ngModelOptions]="{standalone: true}"  class="form-control" id="name" placeholder="Username">
                  <div [hidden]="(name.valid || name.pristine) || !this.checkIfValid" class="alert alert-danger">
                      Please enter the name
                  </div>
              </div>
              <div class="form-group">
                <label for="email">Email</label>
                <input type="email" email required [ngModel]="modUser.email" (ngModelChange)="checkEmail($event, email)" #email="ngModel" [ngModelOptions]="{standalone: true}"  class="form-control" id="email" placeholder="email">
                <div [hidden]="(email.value !== '' && email.valid) || !this.checkIfValid" class="alert alert-danger">
                  Incorrect email format
                </div>

              </div>
              <div class="form-group">
                  <label for="city">City (Optional)</label>
                  <input type="text" [ngModel]="modUser.address.city" #cityInput [ngModelOptions]="{standalone: true}"   class="form-control" id="city" placeholder="city"> 
                </div>
                <div class="modal-footer">
                  <button type="button"  class="btn btn-secondary" data-dismiss="modal">CANCEL</button>
                  <button type="submit"  class="btn btn-primary">SAVE</button>
                </div>
          </form>
      </div>
      
    </div>
  </div>
</div>


<table mat-table [dataSource]="users" class="mat-elevation-z8">

  <ng-container matColumnDef="id">
    <th mat-header-cell *matHeaderCellDef> No. </th>
    <td mat-cell *matCellDef="let element"> {{element.id}} </td>
  </ng-container>

  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef> Name </th>
    <td mat-cell *matCellDef="let element"> {{element.name}} </td>
  </ng-container>

  <ng-container matColumnDef="email">
    <th mat-header-cell *matHeaderCellDef> Email </th>
    <td mat-cell *matCellDef="let element"> {{element.email}} </td>
  </ng-container>

  <ng-container matColumnDef="city">
    <th mat-header-cell *matHeaderCellDef> City </th>
    <td mat-cell *matCellDef="let element"> {{element.address.city}} </td>
  </ng-container>

  <ng-container matColumnDef="edit">
    <th mat-header-cell *matHeaderCellDef> Edit </th>
    <td mat-cell *matCellDef="let element">
      <button mat-stroked-button color="primary" (click)="openEditWindow($event, element)">Edit</button>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>




<router-outlet></router-outlet>
